<% include head.ejs %>
<% include header.ejs %>
	<div class="jumbotron">
		<div class="container" id="trade-container">

		<script id="trade-area" type="type/x-handlebars-template">
		<h2 id="roomName">{{roomID}}</h2>
		<br>

		<!-- Dice -->
		<div id="dice"> 6 </div><br><br><br><br><br>

		<!-- Make offers here -->
		<form class="form-inline">
		  <div class="form-group">  
		    <div class="input-group"> 
		    	<input type="number" min="0" max="50" class="form-control" id="buyPrice" placeholder="Buy">
		    	<input type="number" min="0" max="50" class="form-control" id="sellPrice" placeholder="Sell">
		    	<input type="hidden" id="roomID" value="{{userID}}">
		    </div>
		  </div>
	  	  <button type="button" class="btn btn-primary" id="trade">Make Offer</button>
		
		</form>
		
		<!-- Timer -->
		<div id="contain">
	  		<div class="show-grip">
	  			<div id="timer"><span id="time"></span> </div><br><br><br>
			</div>
		</div>	
		<br><br>

		<!-- View/accept trades here -->
		<div class="row">
		  	<div class="col-md-9 col-md-push-3">Buy</div>
		  	<div class="col-md-3 col-md-pull-3">Sell</div>
		  	<br>
		  	<div class="col-md-9 col-md-push-3">Buy</div>
		  	<div class="col-md-3 col-md-pull-3">Sell</div>
		</div>

		</script>
	</div>
	

	<script>
	function startTimer(duration, display) {
    var start = Date.now(),
        diff,
        
        seconds;
    function timer() {
        // get the number of seconds that have elapsed since 
        // startTimer() was called
        diff = duration - (((Date.now() - start) / 1000) | 0);

        // does the same job as parseInt truncates the float
        
        seconds = (diff % 60) | 0;

        seconds = seconds < 10 ? "0" + seconds : seconds;

        // display.textContent = seconds; 

        if (diff <= 0) {
            // add one second so that the count down starts at the full duration
            // example 05:00 not 04:59
            start = Date.now() + 200;
        }
    };
    // we don't want to wait a full second before the timer starts
    timer();
	    setInterval(timer, 200);
	}

	window.onload = function () {
	    var fiveMinutes = 60,
	        display = document.querySelector('#time');
	    startTimer(fiveMinutes, display);
	};
	</script>
<% include footer.ejs %>